# II. NAT

## 3. Setup topologie 2

ðŸŒž **Ajoutez le noeud Cloud Ã  la topo**

- branchez Ã  `eth1` cÃ´tÃ© Cloud
- cÃ´tÃ© routeur, il faudra rÃ©cupÃ©rer un IP en DHCP :

    ```
    R2(config)#int FastE0/1
    R2(config-if)#ip address dhcp
    R2(config-if)#no shut
    ```

- vous devriez pouvoir `ping 1.1.1.1` : 

    ```
    PC1> ping 1.1.1.1

    84 bytes from 1.1.1.1 icmp_seq=3 ttl=55 time=37.537 ms
    84 bytes from 1.1.1.1 icmp_seq=4 ttl=55 time=38.505 ms
    ```

ðŸŒž **Configurez le NAT**

    ```
    R2(config)#int FastE0/0
    R2(config-if)#ip nat inside
    R2(config-if)#exit
    R2(config)#int FastE0/1
    R2(config-if)#ip nat outside
    R2(config-if)#exit
    R2(config)#exit
    ```

ðŸŒž **Test**

- configurez l'utilisation d'un DNS 
  - sur les VPCS : 

    ```
    PC1> ip dns 1.1.1.1
    ```
  - sur la machine Linux :
    ```
    [cquentin@web-server-tp4 ~]$ sudo cat /etc/resolv.conf
    # Generated by NetworkManager
    nameserver 8.8.8.8
    nameserver 1.1.1.1
    ```
    
- vÃ©rifiez un `ping` vers un nom de domaine :

    ```
    PC1> ping www.ynov.com
    www.ynov.com resolved to 172.67.74.226

    84 bytes from 172.67.74.226 icmp_seq=1 ttl=55 time=30.460 ms
    84 bytes from 172.67.74.226 icmp_seq=2 ttl=55 time=39.770 ms
    84 bytes from 172.67.74.226 icmp_seq=3 ttl=55 time=34.593 ms
    84 bytes from 172.67.74.226 icmp_seq=4 ttl=55 time=37.332 ms




    [cquentin@web-server-tp4 ~]$ ping www.ynov.com
    PING www.ynov.com (104.26.10.233) 56(84) bytes of data.
    64 bytes from 104.26.10.233 (104.26.10.233): icmp_seq=1 ttl=55 time=44.3 ms
    
    --- www.ynov.com ping statistics ---
    1 packets transmitted, 1 received, 0% packet loss, time 0ms
    rtt min/avg/max/mdev = 44.339/44.339/44.339/0.000 ms
    ```